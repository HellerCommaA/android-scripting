This directory contains resources related to JRuby.

json/ contains the JSON implementation for Ruby http://json.rubyforge.org/
jruby-complete-1.2.0RC1.jar, patched jruby-complete.jar (+json +android.rb)


Build instructions:
===================
* Downloaded JRuby sources (jruby-1.2.0RC1) from http://www.jruby.org/download.

* Patched the build.xml to not include doc/index.html otherwise dx will complain about an HTML page in the ruby-complete.jar.

$ diff -r jruby-1.2.0RC1 jruby-1.2.0RC1.patched/
Only in jruby-1.2.0RC1.patched/: build
diff -r jruby-1.2.0RC1/build.xml jruby-1.2.0RC1.patched/build.xml
42c42
<
---
>
238c238,240
<         <zipfileset src="${build.lib.dir}/dynalang-0.3.jar"/>
---
>         <zipfileset src="${build.lib.dir}/dynalang-0.3.jar">
>           <exclude name="**/doc/index.html"/>
>         </zipfileset>
268c270,272
<         <zipfileset src="${build.lib.dir}/dynalang-0.3.jar"/>
---
>         <zipfileset src="${build.lib.dir}/dynalang-0.3.jar">
>           <exclude name="**/doc/index.html"/>
>         </zipfileset>
387c391,393
<         <zipfileset src="${build.lib.dir}/dynalang-0.3.jar"/>
---
>         <zipfileset src="${build.lib.dir}/dynalang-0.3.jar">
>           <exclude name="**/doc/index.html"/>
>         </zipfileset>

* Downloaded the json sources from http://rubyforge.org/frs/?group_id=953 and put them in lib/ruby/1.8/json/.

* Added android.rb to lib/ruby/1.8/

* Build jruby-complete.jar.

Steps to get jruby 1.4 ASEfied and build r1
===========================================
in jruby/ download jruby-src-1.4.0.
$ tar -xvf jruby-src-1.4.0.tar 
$ cp -r json/ jruby-1.4.0/lib/ruby/1.8/
$ cp android.rb jruby-1.4.0/lib/ruby/1.8/
$ cd jruby-1.4.0/
Fix build.xml (see patch above).
$ ant jar-complete
$ dx -JXms1024m -JXmx1024m --dex --output=jruby-complete-1.4.jar lib/jruby-complete.jar 
$ zipalign 4 jruby-complete-1.4.jar jruby-complete-1.4.jar.tmp
$ mkdir jruby
$ mv jruby-complete-1.4.jar.tmp jruby/jruby-complete-1.4.jar
$ zip -r jruby_extras_r1.zip jruby/
